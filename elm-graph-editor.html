<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Elm Graph Editor</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="js/elm-graph-editor.js"></script>
    <script src="js/vis-network.min.js"></script>
</head>

<body>
    <script>
        // Elm setup
        var app = Elm.Main.fullscreen();

        // Vis setup
        var visSetup = function() {
            var nodes = new vis.DataSet();
            var edges = new vis.DataSet();

            // Container in the elm view
            var container = document.getElementById('vis-container');
            var data = {
                nodes: nodes,
                edges: edges,
            };
            var options = {
                width: '600px',
                height: '400px',
                edges: {
                    arrows: 'to'
                }
            };
            var network = new vis.Network(container, data, options);

            // Elm ports setup
            app.ports.addNode.subscribe(function(node) {
                nodes.add(node);
            });
            app.ports.removeNode.subscribe(function(nodeId) {
                nodes.remove(nodeId);
            });
            app.ports.addEdge.subscribe(function(edge) {
                edges.add(edge);
            });
        }

        // Give some time to Elm to render view (which contains vis-container needed by Vis)
        setTimeout(visSetup, 1);
    </script>

</body>

</html>
